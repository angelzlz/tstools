Some tests for the Python binding of the TS tools
=================================================

It's difficult to find example data files that are generally available. For
the moment, I'm going to use a file I have locally, and unfortunately others
will have to manage without. This is still better than no testing...

    >>> test_es_file = '/Users/tibs/sw/tstools/data/aladdin.es'

First, check we've got the basics working:

    >>> from tstools import ESStream
    >>> try:
    ...     stream = ESStream(test_es_file)
    ... except:
    ...     test_es_file = '/home/tibs/Videos/aladdin.es'
    ...     stream = ESStream(test_es_file)

The filename is available as a "readonly" value:

    >>> stream.filename == test_es_file
    True

We've opened it for read:

    >>> stream.is_readable() == True
    True
    >>> stream.is_writable() == False
    True
    >>> stream.mode
    'r'

We should be able to iterate over its ES units:

    >>> count = 0
    >>> es_unit_list = []
    >>> for unit in stream:
    ...     count += 1
    ...     print unit
    ...     es_unit_list.append(unit)
    ...     if count > 5:
    ...         break
    ES unit: start code 00
    ES unit: start code 01
    ES unit: start code 02
    ES unit: start code 03
    ES unit: start code 04
    ES unit: start code 05

And close it:

    >>> stream.close()
    >>> stream.is_writable() == False
    True
    >>> stream.is_readable() == False
    True
    >>> stream.mode is None
    True

And write another file...

    >>> import tempfile
    >>> import os
    >>> directory = tempfile.mkdtemp()
    >>> filename = os.path.join(directory,'tstools_test_1.es')
    >>> out = ESStream(filename,'w')
    >>> out.filename == filename
    True
    >>> out.is_readable() == False
    True
    >>> out.is_writable() == True
    True
    >>> out.mode
    'w'
    >>> for unit in es_unit_list:
    ...    pass     # well, this bit isn't done yet
    >>> out.close()


// Local Variables:
// tab-width: 8
// indent-tabs-mode: nil
// c-basic-offset: 2
// End:
// vim: set filetype=rst tabstop=8 shiftwidth=2 expandtab:
